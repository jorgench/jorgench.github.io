"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{4960:(t,e,i)=>{let s;i.r(e),i.d(e,{default:()=>J});var o=i(5155),n=i(2115);class h{constructor(t){null==t&&(t=+new Date);let e=0xefc8249d;function i(t){t=String(t);for(let i=0;i<t.length;i++){let s=.02519603282416938*(e+=t.charCodeAt(i));e=s>>>0,s-=e,s*=e,e=s>>>0,s-=e,e+=0x100000000*s}return(e>>>0)*23283064365386963e-26}this.c=1,this.s0=i(" "),this.s1=i(" "),this.s2=i(" "),this.s0-=i(t),this.s0<0&&(this.s0+=1),this.s1-=i(t),this.s1<0&&(this.s1+=1),this.s2-=i(t),this.s2<0&&(this.s2+=1)}next(){let{c:t,s0:e,s1:i,s2:s}=this,o=2091639*e+23283064365386963e-26*t;return this.s0=i,this.s1=s,this.s2=o-(this.c=0|o)}copy(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}}let r=!1,a=!1,l=!1,c=!1;function d(){r||(a||function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!!l&&!!t&&c;r&&function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];r&&(y.masks[0].remove(),y.masks[0]=null,y.masks[1].remove(),y.masks[1]=null,y.masks[2].remove(),y.masks[2]=null,t&&brush.load())}(!1),!t&&l&&(t=c),s=t||window.self,y.load(e),a=!0}(),C.create(),b(s.width/250),r=!0)}let m=new function(t,e){var i,s,o;let n,r=new h(t),a=()=>r.next();return a.double=()=>a()+(2097152*a()|0)*11102230246251565e-32,a.int32=()=>0x100000000*r.next()|0,a.quick=a,i=a,s=r,(n=(o=e)&&o.state)&&("object"==typeof n&&s.copy(n,s),i.state=()=>s.copy(s,{})),a}(Math.random()),u={random(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t+m()*(e-t)},randInt(t,e){return Math.floor(this.random(t,e))},gaussian(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.sqrt(-2*Math.log(1-m()))*Math.cos(2*Math.PI*m())*e+t},weightedRand(t){let e,i,s=[];for(e in t)for(i=0;i<10*t[e];i++)s.push(e);return s[Math.floor(m()*s.length)]},map(t,e,i,s,o){let n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],h=s+(t-e)/(i-e)*(o-s);return n?s<o?this.constrain(h,s,o):this.constrain(h,o,s):h},constrain:(t,e,i)=>Math.max(Math.min(t,i),e),cos(t){return this.c[Math.floor((t%360+360)%360*4)]},sin(t){return this.s[Math.floor((t%360+360)%360*4)]},isPrecalculationDone:!1,preCalculation(){if(this.isPrecalculationDone)return;let t=2*Math.PI/1440;this.c=new Float64Array(1440),this.s=new Float64Array(1440);for(let e=0;e<1440;e++){let i=e*t;u.c[e]=Math.cos(i),u.s[e]=Math.sin(i)}this.isPrecalculationDone=!0},isNumber:t=>!isNaN(t),toDegrees:t=>(("radians"===s.angleMode()?180*t/Math.PI:t)%360+360)%360,dist:(t,e,i,s)=>Math.hypot(i-t,s-e)};function v(t,e,i,s){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=t.x,h=t.y,r=e.x,a=e.y,l=i.x,c=i.y,d=s.x,m=s.y;if(n===r&&h===a||l===d&&c===m)return!1;let u=r-n,v=a-h,p=d-l,g=m-c,x=g*u-p*v;if(0===x)return!1;let f=(p*(h-c)-g*(n-l))/x,y=(u*(h-c)-v*(n-l))/x;return(!!o||!(y<0)&&!(y>1))&&{x:n+f*u,y:h+f*v}}function p(t,e,i,s){return(180/Math.PI*Math.atan2(-(s-e),i-t)%360+360)%360}u.preCalculation();let g={translation:[0,0],rotation:0,trans(){return this.translation=[s._renderer.uModelMatrix.mat4[12],s._renderer.uModelMatrix.mat4[13]],this.translation}},x=1;function f(t){x*=t}let y={loaded:!1,isBlending:!1,isCaching:!0,currentColor:new Float32Array(3),load(t){this.type=l&&!t?0:t?2:1,this.masks=[];for(let e=0;e<3;e++)switch(this.type){case 0:this.masks[e]=s.createGraphics(s.width,s.height,1==e?s.WEBGL:s.P2D);break;case 1:this.masks[e]=createGraphics(s.width,s.height,1==e?WEBGL:P2D);break;case 2:this.masks[e]=t.createGraphics(t.width,t.height,1==e?t.WEBGL:t.P2D)}for(let t of this.masks)t.pixelDensity(s.pixelDensity()),t.clear(),t.angleMode(s.DEGREES),t.noSmooth();this.shader=s.createShader(this.vert,this.frag),y.loaded=!0},getPigment(t){let e=t.levels,i=new Float32Array(3);return i[0]=e[0]/255,i[1]=e[1]/255,i[2]=e[2]/255,i},color1:new Float32Array(3),color2:new Float32Array(3),blending1:!1,blending2:!1,blend(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(d(),this.isBlending=i?this.blending1:this.blending2,this.currentColor=i?this.color1:this.color2,!this.isBlending){if(t)this.currentColor=this.getPigment(t),i?(this.blending1=!0,this.color1=this.currentColor):(this.blending2=!0,this.color2=this.currentColor);else if(e){i||w();return}}if((t?this.getPigment(t):this.currentColor).toString()!==this.currentColor.toString()||e||!this.isCaching){if(w(),this.isBlending){s.push(),s.translate(-g.trans()[0],-g.trans()[1]),s.shader(this.shader),this.shader.setUniform("addColor",this.currentColor),this.shader.setUniform("source",s._renderer),this.shader.setUniform("active",y.watercolor),this.shader.setUniform("random",[u.random(),u.random(),u.random()]);let t=i?this.masks[1]:this.masks[0];this.shader.setUniform("mask",t),s.fill(0,0,0,0),s.noStroke(),s.rect(-s.width/2,-s.height/2,s.width,s.height),s.pop(),t.clear()}e||(this.currentColor=this.getPigment(t),i?this.color1=this.currentColor:this.color2=this.currentColor)}e&&(this.isBlending=!1,i?this.blending1=this.isBlending:this.blending2=this.isBlending)},vert:"precision highp float;attribute vec3 aPosition;attribute vec2 aTexCoord;uniform mat4 uModelViewMatrix,uProjectionMatrix;varying vec2 vVertTexCoord;void main(){gl_Position=uProjectionMatrix*uModelViewMatrix*vec4(aPosition,1);vVertTexCoord=aTexCoord;}",frag:"precision highp float;varying vec2 vVertTexCoord;uniform sampler2D source,mask;uniform vec4 addColor;uniform vec3 random;uniform bool active;\n        #ifndef SPECTRAL\n        #define SPECTRAL\n        float x(float v){return v<.04045?v/12.92:pow((v+.055)/1.055,2.4);}float v(float v){return v<.0031308?v*12.92:1.055*pow(v,1./2.4)-.055;}vec3 m(vec3 v){return vec3(x(v[0]),x(v[1]),x(v[2]));}vec3 f(vec3 f){return clamp(vec3(v(f[0]),v(f[1]),v(f[2])),0.,1.);}void f(vec3 v,out float m,out float f,out float x,out float y,out float z,out float i,out float r){m=min(v.x,min(v.y,v.z));v-=m;f=min(v.y,v.z);x=min(v.x,v.z);y=min(v.x,v.y);z=min(max(0.,v.x-v.z),max(0.,v.x-v.y));i=min(max(0.,v.y-v.z),max(0.,v.y-v.x));r=min(max(0.,v.z-v.y),max(0.,v.z-v.x));}void f(vec3 v,inout float i[38]){float x,y,d,z,o,m,e;f(v,x,y,d,z,o,m,e);i[0]=max(1e-4,x+y*.96853629+d*.51567122+z*.02055257+o*.03147571+m*.49108579+e*.97901834);i[1]=max(1e-4,x+y*.96855103+d*.5401552+z*.02059936+o*.03146636+m*.46944057+e*.97901649);i[2]=max(1e-4,x+y*.96859338+d*.62645502+z*.02062723+o*.03140624+m*.4016578+e*.97901118);i[3]=max(1e-4,x+y*.96877345+d*.75595012+z*.02073387+o*.03119611+m*.2449042+e*.97892146);i[4]=max(1e-4,x+y*.96942204+d*.92826996+z*.02114202+o*.03053888+m*.0682688+e*.97858555);i[5]=max(1e-4,x+y*.97143709+d*.97223624+z*.02233154+o*.02856855+m*.02732883+e*.97743705);i[6]=max(1e-4,x+y*.97541862+d*.98616174+z*.02556857+o*.02459485+m*.013606+e*.97428075);i[7]=max(1e-4,x+y*.98074186+d*.98955255+z*.03330189+o*.0192952+m*.01000187+e*.96663223);i[8]=max(1e-4,x+y*.98580992+d*.98676237+z*.05185294+o*.01423112+m*.01284127+e*.94822893);i[9]=max(1e-4,x+y*.98971194+d*.97312575+z*.10087639+o*.01033111+m*.02636635+e*.89937713);i[10]=max(1e-4,x+y*.99238027+d*.91944277+z*.24000413+o*.00765876+m*.07058713+e*.76070164);i[11]=max(1e-4,x+y*.99409844+d*.32564851+z*.53589066+o*.00593693+m*.70421692+e*.4642044);i[12]=max(1e-4,x+y*.995172+d*.13820628+z*.79874659+o*.00485616+m*.85473994+e*.20123039);i[13]=max(1e-4,x+y*.99576545+d*.05015143+z*.91186529+o*.00426186+m*.95081565+e*.08808402);i[14]=max(1e-4,x+y*.99593552+d*.02912336+z*.95399623+o*.00409039+m*.9717037+e*.04592894);i[15]=max(1e-4,x+y*.99564041+d*.02421691+z*.97137099+o*.00438375+m*.97651888+e*.02860373);i[16]=max(1e-4,x+y*.99464769+d*.02660696+z*.97939505+o*.00537525+m*.97429245+e*.02060067);i[17]=max(1e-4,x+y*.99229579+d*.03407586+z*.98345207+o*.00772962+m*.97012917+e*.01656701);i[18]=max(1e-4,x+y*.98638762+d*.04835936+z*.98553736+o*.0136612+m*.9425863+e*.01451549);i[19]=max(1e-4,x+y*.96829712+d*.0001172+z*.98648905+o*.03181352+m*.99989207+e*.01357964);i[20]=max(1e-4,x+y*.89228016+d*8.554e-5+z*.98674535+o*.10791525+m*.99989891+e*.01331243);i[21]=max(1e-4,x+y*.53740239+d*.85267882+z*.98657555+o*.46249516+m*.13823139+e*.01347661);i[22]=max(1e-4,x+y*.15360445+d*.93188793+z*.98611877+o*.84604333+m*.06968113+e*.01387181);i[23]=max(1e-4,x+y*.05705719+d*.94810268+z*.98559942+o*.94275572+m*.05628787+e*.01435472);i[24]=max(1e-4,x+y*.03126539+d*.94200977+z*.98507063+o*.96860996+m*.06111561+e*.01479836);i[25]=max(1e-4,x+y*.02205445+d*.91478045+z*.98460039+o*.97783966+m*.08987709+e*.0151525);i[26]=max(1e-4,x+y*.01802271+d*.87065445+z*.98425301+o*.98187757+m*.13656016+e*.01540513);i[27]=max(1e-4,x+y*.0161346+d*.78827548+z*.98403909+o*.98377315+m*.22169624+e*.01557233);i[28]=max(1e-4,x+y*.01520947+d*.65738359+z*.98388535+o*.98470202+m*.32176956+e*.0156571);i[29]=max(1e-4,x+y*.01475977+d*.59909403+z*.98376116+o*.98515481+m*.36157329+e*.01571025);i[30]=max(1e-4,x+y*.01454263+d*.56817268+z*.98368246+o*.98537114+m*.4836192+e*.01571916);i[31]=max(1e-4,x+y*.01444459+d*.54031997+z*.98365023+o*.98546685+m*.46488579+e*.01572133);i[32]=max(1e-4,x+y*.01439897+d*.52110241+z*.98361309+o*.98550011+m*.47440306+e*.01572502);i[33]=max(1e-4,x+y*.0143762+d*.51041094+z*.98357259+o*.98551031+m*.4857699+e*.01571717);i[34]=max(1e-4,x+y*.01436343+d*.50526577+z*.98353856+o*.98550741+m*.49267971+e*.01571905);i[35]=max(1e-4,x+y*.01435687+d*.5025508+z*.98351247+o*.98551323+m*.49625685+e*.01571059);i[36]=max(1e-4,x+y*.0143537+d*.50126452+z*.98350101+o*.98551563+m*.49807754+e*.01569728);i[37]=max(1e-4,x+y*.01435408+d*.50083021+z*.98350852+o*.98551547+m*.49889859+e*.0157002);}vec3 t(vec3 x){mat3 i;i[0]=vec3(3.24306333,-1.53837619,-.49893282);i[1]=vec3(-.96896309,1.87542451,.04154303);i[2]=vec3(.05568392,-.20417438,1.05799454);float v=dot(i[0],x),y=dot(i[1],x),o=dot(i[2],x);return f(vec3(v,y,o));}vec3 d(float m[38]){vec3 i=vec3(0);i+=m[0]*vec3(6.469e-5,1.84e-6,.00030502);i+=m[1]*vec3(.00021941,6.21e-6,.00103681);i+=m[2]*vec3(.00112057,3.101e-5,.00531314);i+=m[3]*vec3(.00376661,.00010475,.01795439);i+=m[4]*vec3(.01188055,.00035364,.05707758);i+=m[5]*vec3(.02328644,.00095147,.11365162);i+=m[6]*vec3(.03455942,.00228226,.17335873);i+=m[7]*vec3(.03722379,.00420733,.19620658);i+=m[8]*vec3(.03241838,.0066888,.18608237);i+=m[9]*vec3(.02123321,.0098884,.13995048);i+=m[10]*vec3(.01049099,.01524945,.08917453);i+=m[11]*vec3(.00329584,.02141831,.04789621);i+=m[12]*vec3(.00050704,.03342293,.02814563);i+=m[13]*vec3(.00094867,.05131001,.01613766);i+=m[14]*vec3(.00627372,.07040208,.0077591);i+=m[15]*vec3(.01686462,.08783871,.00429615);i+=m[16]*vec3(.02868965,.09424905,.00200551);i+=m[17]*vec3(.04267481,.09795667,.00086147);i+=m[18]*vec3(.05625475,.09415219,.00036904);i+=m[19]*vec3(.0694704,.08678102,.00019143);i+=m[20]*vec3(.08305315,.07885653,.00014956);i+=m[21]*vec3(.0861261,.0635267,9.231e-5);i+=m[22]*vec3(.09046614,.05374142,6.813e-5);i+=m[23]*vec3(.08500387,.04264606,2.883e-5);i+=m[24]*vec3(.07090667,.03161735,1.577e-5);i+=m[25]*vec3(.05062889,.02088521,3.94e-6);i+=m[26]*vec3(.03547396,.01386011,1.58e-6);i+=m[27]*vec3(.02146821,.00810264,0);i+=m[28]*vec3(.01251646,.0046301,0);i+=m[29]*vec3(.00680458,.00249138,0);i+=m[30]*vec3(.00346457,.0012593,0);i+=m[31]*vec3(.00149761,.00054165,0);i+=m[32]*vec3(.0007697,.00027795,0);i+=m[33]*vec3(.00040737,.00014711,0);i+=m[34]*vec3(.00016901,6.103e-5,0);i+=m[35]*vec3(9.522e-5,3.439e-5,0);i+=m[36]*vec3(4.903e-5,1.771e-5,0);i+=m[37]*vec3(2e-5,7.22e-6,0);return i;}float d(float y,float m,float v){float z=m*pow(v,2.);return z/(y*pow(1.-v,2.)+z);}vec3 f(vec3 v,vec3 y,float z){vec3 x=m(v),o=m(y);float i[38],a[38];f(x,i);f(o,a);float r=d(i)[1],e=d(a)[1];z=d(r,e,z);float s[38];for(int u=0;u<38;u++){float p=(1.-z)*(pow(1.-i[u],2.)/(2.*i[u]))+z*(pow(1.-a[u],2.)/(2.*a[u]));s[u]=1.+p-sqrt(pow(p,2.)+2.*p);}return t(d(s));}vec4 f(vec4 v,vec4 x,float y){return vec4(f(v.xyz,x.xyz,y),mix(v.w,x.w,y));}\n        #endif\n        float d(vec2 m,vec2 v,float y,out vec2 i){vec2 f=vec2(m.x+m.y*.5,m.y),x=floor(f),o=fract(f);float z=step(o.y,o.x);vec2 d=vec2(z,1.-z),r=x+d,e=x+1.,a=vec2(x.x-x.y*.5,x.y),p=vec2(a.x+d.x-d.y*.5,a.y+d.y),s=vec2(a.x+.5,a.y+1.),w=m-a,g=m-p,k=m-s;vec3 u,c,t,A;if(any(greaterThan(v,vec2(0)))){t=vec3(a.x,p.x,s);A=vec3(a.y,p.y,s.y);if(v.x>0.)t=mod(vec3(a.x,p.x,s),v.x);if(v.y>0.)A=mod(vec3(a.y,p.y,s.y),v.y);u=floor(t+.5*A+.5);c=floor(A+.5);}else u=vec3(x.x,r.x,e),c=vec3(x.y,r.y,e.y);vec3 S=mod(u,289.);S=mod((S*51.+2.)*S+c,289.);S=mod((S*34.+10.)*S,289.);vec3 b=S*.07482+y,C=cos(b),D=sin(b);vec2 h=vec2(C.x,D),B=vec2(C.y,D.y),E=vec2(C.z,D.z);vec3 F=.8-vec3(dot(w,w),dot(g,g),dot(k,k));F=max(F,0.);vec3 G=F*F,H=G*G,I=vec3(dot(h,w),dot(B,g),dot(E,k)),J=G*F,K=-8.*J*I;i=10.9*(H.x*h+K.x*w+(H.y*B+K.y*g)+(H.z*E+K.z*k));return 10.9*dot(H,I);}vec4 d(vec3 v,float x){return vec4(mix(v,vec3(dot(vec3(.299,.587,.114),v)),x),1);}float f(vec2 v,float x,float y,float f){return fract(sin(dot(v,vec2(x,y)))*f);}void main(){vec4 v=texture2D(mask,vVertTexCoord);if(v.x>0.){vec2 x=vec2(12.9898,78.233),o=vec2(7.9898,58.233),m=vec2(17.9898,3.233);float y=f(vVertTexCoord,x.x,x.y,43358.5453)*2.-1.,z=f(vVertTexCoord,o.x,o.y,43213.5453)*2.-1.,e=f(vVertTexCoord,m.x,m.y,33358.5453)*2.-1.;const vec2 i=vec2(0);vec2 s;vec4 r;if(active){float a=d(vVertTexCoord*5.,i,10.*random.x,s),p=d(vVertTexCoord*5.,i,10.*random.y,s),g=d(vVertTexCoord*5.,i,10.*random.z,s),k=.25+.25*d(vVertTexCoord*4.,i,3.*random.x,s);r=vec4(d(addColor.xyz,k).xyz+vec3(a,p,g)*.03*abs(addColor.x-addColor.y-addColor.z),1);}else r=vec4(addColor.xyz,1);if(v.w>.7){float a=.5*(v.w-.7);r=r*(1.-a)-vec4(.5)*a;}vec3 a=f(texture2D(source,vVertTexCoord).xyz,r.xyz,.9*v.w);gl_FragColor=vec4(a+.01*vec3(y,z,e),1);}}"};function w(){s.push(),s.translate(-g.trans()[0],-g.trans()[1]),s.image(y.masks[2],-s.width/2,-s.height/2),y.masks[2].clear(),s.pop()}function k(t){t.registerMethod("afterSetup",()=>y.blend(!1,!0)),t.registerMethod("afterSetup",()=>y.blend(!1,!0,!0)),t.registerMethod("post",()=>y.blend(!1,!0)),t.registerMethod("post",()=>y.blend(!1,!0,!0))}function z(t,e){C.list.set(t,{gen:e}),C.current=t,C.refresh()}"undefined"!=typeof p5&&k(p5.prototype);let C={isActive:!1,list:new Map,current:"",step_length:()=>Math.min(s.width,s.height)/1e3,create(){this.R=.01*s.width,this.left_x=-1*s.width,this.top_y=-1*s.height,this.num_columns=Math.round(2*s.width/this.R),this.num_rows=Math.round(2*s.height/this.R),this.addStandard()},flow_field(){return this.list.get(this.current).field},refresh(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.list.get(this.current).field=this.list.get(this.current).gen(t,this.genField())},genField(){let t=Array(this.num_columns);for(let e=0;e<this.num_columns;e++)t[e]=new Float64Array(this.num_rows);return t},addStandard(){z("curved",function(t,e){let i=u.randInt(-25,-15);u.randInt(0,100)%2==0&&(i*=-1);for(let o=0;o<C.num_columns;o++)for(let n=0;n<C.num_rows;n++){let h=s.noise(.02*o+.03*t,.02*n+.03*t),r=u.map(h,0,1,-i,i);e[o][n]=3*r}return e}),z("truncated",function(t,e){let i=u.randInt(-25,-15)+5*u.sin(t);u.randInt(0,100)%2==0&&(i*=-1);let o=u.randInt(5,10);for(let t=0;t<C.num_columns;t++)for(let n=0;n<C.num_rows;n++){let h=s.noise(.02*t,.02*n),r=Math.round(u.map(h,0,1,-i,i)/o)*o;e[t][n]=4*r}return e}),z("zigzag",function(t,e){let i=u.randInt(-30,-15)+Math.abs(44*u.sin(t));u.randInt(0,100)%2==0&&(i*=-1);let s=i,o=0;for(let t=0;t<C.num_columns;t++){for(let i=0;i<C.num_rows;i++)e[t][i]=o,o+=s,s*=-1;o+=s,s*=-1}return e}),z("waves",function(t,e){let i=u.randInt(10,15)+5*u.sin(t),s=u.randInt(3,6)+3*u.cos(t),o=u.randInt(20,35);for(let t=0;t<C.num_columns;t++)for(let n=0;n<C.num_rows;n++){let h=u.sin(i*t)*(o*u.cos(n*s))+u.randInt(-3,3);e[t][n]=h}return e}),z("seabed",function(t,e){let i=u.random(.4,.8),s=u.randInt(18,26);for(let o=0;o<C.num_columns;o++)for(let n=0;n<C.num_rows;n++){let h=u.randInt(15,20),r=s*u.sin(i*n*o+h);e[o][n]=1.1*r*u.cos(t)}return e})}};class _{update(t,e){this.x=t,this.y=e,C.isActive&&(this.x_offset=this.x-C.left_x+g.trans()[0],this.y_offset=this.y-C.top_y+g.trans()[1],this.column_index=Math.round(this.x_offset/C.R),this.row_index=Math.round(this.y_offset/C.R))}reset(){this.plotted=0}isIn(){return C.isActive?this.column_index>=0&&this.row_index>=0&&this.column_index<C.num_columns&&this.row_index<C.num_rows:this.isInCanvas()}isInCanvas(){let t=s.width,e=s.height;return this.x>=-t-g.trans()[0]&&this.x<=t-g.trans()[0]&&this.y>=-e-g.trans()[1]&&this.y<=e-g.trans()[1]}angle(){return this.isIn()&&C.isActive?C.flow_field()[this.column_index][this.row_index]:0}moveTo(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.spacing(),s=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(this.isIn()){let o,n;s||(o=u.cos(-e),n=u.sin(-e));for(let h=0;h<t/i;h++){if(s){let t=this.angle();o=u.cos(t-e),n=u.sin(t-e)}let t=i*o,h=i*n;this.plotted+=i,this.update(this.x+t,this.y+h)}}else this.plotted+=i}plotTo(t,e,i,s){if(this.isIn()){let o=1/s;for(let s=0;s<e/i;s++){let e=this.angle(),s=t.angle(this.plotted),n=i*u.cos(e-s),h=i*u.sin(e-s);this.plotted+=i*o,this.update(this.x+n,this.y+h)}}else this.plotted+=i/f}constructor(t,e){this.update(t,e),this.plotted=0}}function b(t){for(let e of W){let i=A.list.get(e[0]).param;i.weight*=t,i.vibration*=t,i.spacing*=t}M=t}let M=1,A={isActive:!0,list:new Map,c:"#000000",w:1,cr:null,name:"HB",spacing(){return(this.p=this.list.get(this.name).param,"default"===this.p.type||"spray"===this.p.type)?this.p.spacing/this.w:this.p.spacing},initializeDrawingState(t,e,i,s,o){this.position=new _(t,e),this.length=i,this.flow=s,this.plot=o,o&&o.calcIndex(0)},draw(t,e){e||(this.dir=t),this.pushState();let i=this.spacing(),s=e?Math.round(this.length*t/i):Math.round(this.length/i);for(let o=0;o<s;o++)this.tip(),e?this.position.plotTo(this.plot,i,i,t):this.position.moveTo(i,t,i,this.flow);this.popState()},drawTip(t){this.pushState(!0),this.tip(t),this.popState(!0)},pushState(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.p=this.list.get(this.name).param,!t){this.a="custom"!==this.p.pressure.type?u.random(-1,1):0,this.b="custom"!==this.p.pressure.type?u.random(1,1.5):0,this.cp="custom"!==this.p.pressure.type?u.random(3,3.5):u.random(-.2,.2);let[t,e]=this.p.pressure.min_max;this.min=t,this.max=e}this.c=s.color(this.c),this.mask=this.p.blend?"image"===this.p.type?y.masks[1]:y.masks[0]:y.masks[2],g.trans(),this.mask.push(),this.mask.noStroke(),"image"===this.p.type?this.mask.translate(g.translation[0],g.translation[1]):this.mask.translate(g.translation[0]+s.width/2,g.translation[1]+s.height/2),this.mask.rotate(-g.rotation),this.mask.scale(x),this.p.blend&&(y.watercolor=!1,"image"!==this.p.type?y.blend(this.c):y.blend(this.c,!1,!0),t||this.markerTip()),this.alpha=this.calculateAlpha(),this.applyColor(this.alpha)},popState(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.p.blend&&!t&&this.markerTip(),this.mask.pop()},tip(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t||this.calculatePressure();if(this.isInsideClippingArea())switch(this.p.type){case"spray":this.drawSpray(e);break;case"marker":this.drawMarker(e);break;case"custom":case"image":this.drawCustomOrImage(e,this.alpha);break;default:this.drawDefault(e)}},calculatePressure(){return this.plot?this.simPressure()*this.plot.pressure(this.position.plotted):this.simPressure()},simPressure(){return"custom"===this.p.pressure.type?u.map(this.p.pressure.curve(this.position.plotted/this.length)+this.cp,0,1,this.min,this.max,!0):this.gauss()},gauss(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5+A.p.pressure.curve[0]*A.a,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1-A.p.pressure.curve[1]*A.b,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.cp,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A.min,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:A.max;return u.map(1/(1+Math.pow(Math.abs((this.position.plotted-t*this.length)/(e*this.length/2)),2*i)),0,1,s,o)},calculateAlpha(){return"default"!==this.p.type&&"spray"!==this.p.type?this.p.opacity/this.w:this.p.opacity},applyColor(t){this.p.blend?this.mask.fill(255,0,0,t/2):(this.c.setAlpha(t),this.mask.fill(this.c))},isInsideClippingArea(){if(A.cr)return this.position.x>=A.cr[0]&&this.position.x<=A.cr[2]&&this.position.y>=A.cr[1]&&this.position.y<=A.cr[3];{let t=.55*s.width,e=.55*s.height;return this.position.x>=-t-g.trans()[0]&&this.position.x<=t-g.trans()[0]&&this.position.y>=-e-g.trans()[1]&&this.position.y<=e-g.trans()[1]}},drawSpray(t){let e=this.w*this.p.vibration*t+this.w*u.gaussian()*this.p.vibration/3,i=this.p.weight*u.random(.9,1.1),s=this.p.quality/t;for(let t=0;t<s;t++){let t=u.random(.9,1.1),s=t*e*u.random(-1,1),o=u.random(-1,1),n=Math.sqrt(Math.pow(t*e,2)-Math.pow(s,2));this.mask.circle(this.position.x+s,this.position.y+o*n,i)}},drawMarker(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=e?this.w*this.p.vibration:0,s=e?i*u.random(-1,1):0,o=e?i*u.random(-1,1):0;this.mask.circle(this.position.x+s,this.position.y+o,this.w*this.p.weight*t)},drawCustomOrImage(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];this.mask.push();let s=i?this.w*this.p.vibration:0,o=i?s*u.random(-1,1):0,n=i?s*u.random(-1,1):0;this.mask.translate(this.position.x+o,this.position.y+n),this.adjustSizeAndRotation(this.w*t,e),this.p.tip(this.mask),this.mask.pop()},drawDefault(t){let e=this.w*this.p.vibration*(this.p.definition+(1-this.p.definition)*u.gaussian()*this.gauss(.5,.9,5,.2,1.2)/t);u.random(0,this.p.quality*t)>.4&&this.mask.circle(this.position.x+.7*e*u.random(-1,1),this.position.y+e*u.random(-1,1),t*this.p.weight*u.random(.85,1.15))},adjustSizeAndRotation(t,e){if(this.mask.scale(t),"image"===this.p.type&&(this.p.blend?this.mask.tint(255,0,0,e/2):this.mask.tint(this.mask.red(this.c),this.mask.green(this.c),this.mask.blue(this.c),e)),"random"===this.p.rotate)this.mask.rotate(u.randInt(0,360));else if("natural"===this.p.rotate){let t=(this.plot?-this.plot.angle(this.position.plotted):-this.dir)+(this.flow?this.position.angle():0);this.mask.rotate(t)}},markerTip(){if(this.isInsideClippingArea()){let t=this.calculatePressure(),e=this.calculateAlpha(t);if(this.mask.fill(255,0,0,e/1.5),"marker"===A.p.type)for(let e=1;e<5;e++)this.drawMarker(t*e/5,!1);else if("custom"===A.p.type||"image"===A.p.type)for(let i=1;i<5;i++)this.drawCustomOrImage(t*i/5,e,!1)}}};function S(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;A.name=t,A.c=e,A.w=i,A.isActive=!0}function P(t,e,i){arguments.length>0&&(A.c=arguments.length<2?t:[t,e,i]),A.isActive=!0}function I(t,e,i,s){d();let o=u.dist(t,e,i,s);if(0==o)return;A.initializeDrawingState(t,e,o,!1,!1);let n=p(t,e,i,s);A.draw(n,!1)}let T={tips:new Map,add(t){this.tips.set(t,!1)},imageToWhite(t){t.loadPixels();for(let e=0;e<4*t.width*t.height;e+=4){let i=(t.pixels[e]+t.pixels[e+1]+t.pixels[e+2])/3;t.pixels[e]=t.pixels[e+1]=t.pixels[e+2]=255,t.pixels[e+3]=255-i}t.updatePixels()},load(){for(let t of this.tips.keys()){let e=(l?c:window.self).loadImage(t,()=>T.imageToWhite(e));this.tips.set(t,e)}}};function E(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:45,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{rand:!1,continuous:!1,gradient:!1};D.isActive=!0,D.hatchingParams=[t,e,i]}function B(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;D.hatchingBrush=[t,e,i]}let D={isActive:!1,hatchingParams:[5,45,{}],hatchingBrush:!1,hatch(t){let e=D.hatchingParams[0],i=D.hatchingParams[1],s=D.hatchingParams[2],o=A.c,n=A.name,h=A.w,r=A.isActive;D.hatchingBrush&&S(D.hatchingBrush[0],D.hatchingBrush[1],D.hatchingBrush[2]),i=u.toDegrees(i)%180;let a=1/0,l=-1/0,c=1/0,d=-1/0,m=t=>{for(let e of t.a)a=e[0]<a?e[0]:a,l=e[0]>l?e[0]:l,c=e[1]<c?e[1]:c,d=e[1]>d?e[1]:d};for(let e of(Array.isArray(t)||(t=[t]),t))m(e);let v=new L([[a,c],[l,c],[l,d],[a,d]]),p=i<=90&&i>=0?c:d,g=s.gradient?u.map(s.gradient,0,1,1,1.1,!0):1,x=[],f=0,y=e,w=t=>({point1:{x:a+y*t*u.cos(-i+90),y:p+y*t*u.sin(-i+90)},point2:{x:a+y*t*u.cos(-i+90)+u.cos(-i),y:p+y*t*u.sin(-i+90)+u.sin(-i)}});for(;v.intersect(w(f)).length>0;){let e=[];for(let i of t)e.push(i.intersect(w(f)));x[f]=e.flat().sort((t,e)=>t.x===e.x?t.y-e.y:t.x-e.x),y*=g,f++}let k=[];for(let t of x)void 0!==t[0]&&k.push(t);let z=s.rand?s.rand:0;for(let t=0;t<k.length;t++){let i=k[t],o=t>0&&s.continuous;for(let s=0;s<i.length-1;s+=2)0!==z&&(i[s].x+=z*e*u.random(-10,10),i[s].y+=z*e*u.random(-10,10),i[s+1].x+=z*e*u.random(-10,10),i[s+1].y+=z*e*u.random(-10,10)),I(i[s].x,i[s].y,i[s+1].x,i[s+1].y),o&&I(k[t-1][1].x,k[t-1][1].y,i[s].x,i[s].y)}S(n,o,h),A.isActive=r}};D.hatch;class L{intersect(t){let e="".concat(t.point1.x,",").concat(t.point1.y,"-").concat(t.point2.x,",").concat(t.point2.y);if(this._intersectionCache&&this._intersectionCache[e])return this._intersectionCache[e];let i=[];for(let e of this.sides){let s=v(t.point1,t.point2,e[0],e[1]);!1!==s&&i.push(s)}return this._intersectionCache||(this._intersectionCache={}),this._intersectionCache[e]=i,i}draw(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=A.isActive;if(t&&S(t,e,i),A.isActive)for(let t of(d(),this.sides))I(t[0].x,t[0].y,t[1].x,t[1].y);A.isActive=s}fill(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0,r=R.isActive;t&&(function(t,e,i,o){d(),R.opacity=arguments.length<4?arguments.length<3?e:1:o,R.color=arguments.length<3?s.color(t):s.color(t,e,i),R.isActive=!0}(t,e),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"out";d(),R.bleed_strength=u.constrain(t,0,.6),R.direction=e}(i,h),function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4;d(),R.texture_strength=u.constrain(t,0,1),R.border_strength=u.constrain(e,0,1)}(o,n)),R.isActive&&(d(),R.fill(this)),R.isActive=r}hatch(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,s=D.isActive;t&&E(t,e,i),D.isActive&&(d(),D.hatch(this)),D.isActive=s}erase(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.a;if(V.isActive||t){y.masks[2].push(),y.masks[2].noStroke();let i=s.color(t||V.c);for(let t of(i.setAlpha(e),y.masks[2].fill(i),y.masks[2].beginShape(),this.vertices))y.masks[2].vertex(t.x,t.y);y.masks[2].endShape(s.CLOSE),y.masks[2].pop()}}show(){this.fill(),this.hatch(),this.draw(),this.erase()}constructor(t,e=!1){this.a=t,this.vertices=t.map(t=>({x:t[0],y:t[1]})),e&&(this.vertices=t),this.sides=this.vertices.map((t,e,i)=>[t,i[(e+1)%i.length]])}}class F{addSegment(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.angles.length>0&&this.angles.splice(-1),t=s?(t%360+360)%360:u.toDegrees(t),this.angles.push(t),this.pres.push(i),this.segments.push(e),this.length=this.segments.reduce((t,e)=>t+e,0),this.angles.push(t)}endPlot(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=i?(t%360+360)%360:u.toDegrees(t),this.angles.splice(-1),this.angles.push(t),this.pres.push(e)}rotate(t){this.dir=u.toDegrees(t)}pressure(t){return t>this.length?this.pres[this.pres.length-1]:this.curving(this.pres,t)}angle(t){return t>this.length?this.angles[this.angles.length-1]:(this.calcIndex(t),"curve"===this.type?this.curving(this.angles,t)+this.dir:this.angles[this.index]+this.dir)}curving(t,e){let i=t[this.index],s=t[this.index+1];return void 0===s&&(s=i),Math.abs(s-i)>180&&(s>i?s=-(360-s):i=-(360-i)),u.map(e-this.suma,0,this.segments[this.index],i,s,!0)}calcIndex(t){this.index=-1,this.suma=0;let e=0;for(;e<=t;)this.suma=e,e+=this.segments[this.index+1],this.index++;return this.index}genPol(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2];let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];d();let s=[],o=Math.round(this.length/.5),n=new _(t,e),h=i?.15:3*R.bleed_strength,r=0,a=0;for(let t=0;t<o;t++){n.plotTo(this,.5,.5,1);let t=this.calcIndex(n.plotted);((r+=.5)>=this.segments[t]*h*u.random(.7,1.3)||t>=a)&&n.x&&(s.push([n.x,n.y]),r=0,t>=a&&a++)}return new L(s)}draw(t,e,i){if(A.isActive){var s,o,n;d(),this.origin&&(t=this.origin[0],e=this.origin[1],i=1),s=t,o=e,n=i,d(),A.initializeDrawingState(s,o,this.length,!0,this),A.draw(n,!0)}}fill(t,e,i){R.isActive&&(d(),this.origin&&(t=this.origin[0],e=this.origin[1],i=1),this.pol=this.genPol(t,e,i),this.pol.fill())}hatch(t,e,i){D.isActive&&(d(),this.origin&&(t=this.origin[0],e=this.origin[1],i=1),this.pol=this.genPol(t,e,i,!0),this.pol.hatch())}erase(t,e,i){if(V.isActive){this.origin&&(t=this.origin[0],e=this.origin[1],i=1),this.pol=this.genPol(t,e,i,!0),y.masks[2].push(),y.masks[2].noStroke();let o=s.color(V.c);for(let t of(o.setAlpha(V.a),y.masks[2].fill(o),y.masks[2].beginShape(),this.pol.vertices))y.masks[2].vertex(t.x,t.y);y.masks[2].endShape(s.CLOSE),y.masks[2].pop()}}show(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.draw(t,e,i),this.fill(t,e,i),this.hatch(t,e,i),this.erase(t,e,i)}constructor(t){this.segments=[],this.angles=[],this.pres=[],this.type=t,this.dir=0,this.calcIndex(0),this.pol=!1}}let V={};function G(){R.isActive=!1}let R={isActive:!1,isAnimated:!1,color:"#002185",opacity:80,bleed_strength:.07,texture_strength:.4,border_strength:.4,fill(t){this.polygon=t,this.v=[...t.vertices];let e=this.v.length*u.random(.4);R.m=this.v.map((t,i)=>{let s=u.random(.8,1.2)*this.bleed_strength;return i<e?u.constrain(2*s,0,.9):s});let i=u.randInt(0,this.v.length);if(R.light_source)for(let t=0;t<this.v.length;t++)u.dist(this.v[t].x,this.v[t].y,R.light_source.x,R.light_source.y)<u.dist(this.v[i].x,this.v[i].y,R.light_source.x,R.light_source.y)&&(i=t);this.v=[...this.v.slice(i),...this.v.slice(0,i)],new O(this.v,this.m,this.calcCenter(),[],!0).fill(this.color,Math.floor(u.map(this.opacity,0,155,0,20,!0)),this.texture_strength)},calcCenter(){let t=0,e=0;for(let i=0;i<this.v.length;++i)t+=this.v[i].x,e+=this.v[i].y;return{x:t/=this.v.length,y:e/=this.v.length}}};function H(t,e,i,s,o){let n=u.cos(o),h=u.sin(o);return{x:n*(i-t)+h*(s-e)+t,y:n*(s-e)-h*(i-t)+e}}class O{trim(t){let e=[...this.v],i=[...this.m],s=[...this.dir];if(this.v.length>10&&t>=.2){let o=~~((1-t)*this.v.length),n=~~this.v.length/2-~~o/2;e.splice(n,o),i.splice(n,o),s.splice(n,o)}return{v:e,m:i,dir:s}}grow(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],s=[],o=[],n=this.trim(t),h=e?-.5:1,r=t=>t+(u.gaussian(.5,.1)-.5)*.1;for(let e=0;e<n.v.length;e++){let a=n.v[e],l=n.v[(e+1)%n.v.length],c=.1===t?R.bleed_strength<=.1?.25:.75:n.m[e];c*=h,i.push(a),s.push(r(c));let d={x:l.x-a.x,y:l.y-a.y},m=n.dir[e],v="out"==R.direction?-90:90,p=(m?v:-v)+45*u.gaussian(0,.4),g=u.constrain(u.gaussian(.5,.2),.1,.9),x={x:a.x+d.x*g,y:a.y+d.y*g},f=u.gaussian(.5,.2)*u.random(.6,1.4)*c,y=H(0,0,d.x,d.y,p);x.x+=y.x*f,x.y+=y.y*f,i.push(x),s.push(r(c)),o.push(m,m)}return new O(i,s,this.midP,o)}fill(t,e,i){let o=u.map(R.bleed_strength,0,.15,.6,1,!0),n=24*o,h=e/5+i*e/6,r=e/4+i*e/3,a=e/7+i*e/3,l=e/5,c=3*i;y.watercolor=!0,g.trans(),y.blend(t,!1,!1,!0),y.masks[0].push(),y.masks[0].noStroke(),y.masks[0].translate(g.translation[0]+s.width/2,g.translation[1]+s.height/2),y.masks[0].rotate(g.rotation),y.masks[0].scale(x);let d=this.grow(),m=d.grow().grow(.9),v=m.grow(.75),p=this.grow(.6);for(let t=0;t<n;t++)(t===Math.floor(n/4)||t===Math.floor(n/2)||t===Math.floor(3*n/4))&&(d=d.grow(),(1===o||t===Math.floor(n/2))&&(m=m.grow(.75),v=v.grow(.75),p=p.grow(.1,!0))),d.grow().layer(t,l),p.grow(.1,!0).grow(.1).layer(t,a,!1),m.grow(.1).grow(.1).layer(t,r,!1),v.grow(.8).grow(.1).layer(t,h,!1),0!==c&&d.erase(c,e);y.masks[0].pop()}layer(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];for(let s of(y.masks[0].fill(255,0,0,e),i?(y.masks[0].stroke(255,0,0,.5+1.5*R.border_strength),y.masks[0].strokeWeight(u.map(t,0,24,6,.5))):y.masks[0].noStroke(),y.masks[0].beginShape(),this.v))y.masks[0].vertex(s.x,s.y);y.masks[0].endShape(s.CLOSE)}erase(t,e){let i=u.random(130,200),s=this.size/2,o=.025*this.size,n=.19*this.size;y.masks[0].erase(3.5*t-u.map(e,80,120,.3,1,!0),0);for(let t=0;t<i;t++){let t=this.midP.x+u.gaussian(0,s),e=this.midP.y+u.gaussian(0,s),i=u.random(o,n);y.masks[0].circle(t,e,i)}y.masks[0].noErase()}constructor(t,e,i,s,o=!1){for(let o of(this.pol=new L(t,!0),this.v=t,this.dir=s,this.m=e,this.midP=i,this.size=-1/0,this.v)){let t=u.dist(this.midP.x,this.midP.y,o.x,o.y);t>this.size&&(this.size=t)}if(o)for(let t=0;t<this.v.length;t++){let e=this.v[t],i=this.v[(t+1)%this.v.length],s={x:i.x-e.x,y:i.y-e.y},o=H(0,0,s.x,s.y,90),n={point1:{x:e.x+s.x/2,y:e.y+s.y/2},point2:{x:e.x+s.x/2+o.x,y:e.y+s.y/2+o.y}},h=(t,e,i)=>(e.x-t.x)*(i.y-t.y)-(e.y-t.y)*(i.x-t.x)>.01,r=0;for(let t of R.polygon.intersect(n))h(e,i,t)&&r++;this.dir[t]=r%2==0}}}let q=["weight","vibration","definition","quality","opacity","spacing","pressure","type","tip","rotate"],W=[["pen",[.35,.12,.5,8,200,.3,{curve:[.15,.2],min_max:[1.4,.9]}]],["rotring",[.2,.05,1,3,250,.15,{curve:[.05,.2],min_max:[1.7,.8]}]],["2B",[.35,.5,.1,8,180,.2,{curve:[.15,.2],min_max:[1.3,1]}]],["HB",[.3,.5,.4,4,180,.25,{curve:[.15,.2],min_max:[1.2,.9]}]],["2H",[.2,.4,.3,2,150,.2,{curve:[.15,.2],min_max:[1.2,.9]}]],["cpencil",[.4,.6,.8,7,120,.15,{curve:[.15,.2],min_max:[.95,1.2]}]],["charcoal",[.5,2,.8,300,110,.06,{curve:[.15,.2],min_max:[1.3,.8]}]],["hatch_brush",[.2,.4,.3,2,150,.15,{curve:[.5,.7],min_max:[1,1.5]}]],["spray",[.3,12,15,40,80,.65,{curve:[0,.1],min_max:[.15,1.2]},"spray"]],["marker",[2.5,.12,null,null,25,.4,{curve:[.35,.25],min_max:[1.5,1]},"marker"]],["marker2",[2.5,.12,null,null,25,.35,{curve:[.35,.25],min_max:[1.3,.95]},"custom",function(t){let e=M;t.rect(-1.5*e,-1.5*e,3*e,3*e),t.rect(1*e,1*e,1*e,1*e)},"natural"]]];for(let t of W){let e={};for(let i=0;i<t[1].length;i++)e[q[i]]=t[1][i];!function(t,e){let i="marker"===e.type||"custom"===e.type||"image"===e.type;i||"spray"===e.type||(e.type="default"),"image"===e.type&&(T.add(e.image.src),e.tip=()=>A.mask.image(T.tips.get(A.p.image.src),-A.p.weight/2,-A.p.weight/2,A.p.weight,A.p.weight)),e.blend=!!i&&!1!==e.blend||!!e.blend,A.list.set(t,{param:e,colors:[],buffers:[]})}(t[0],e)}var N=i(5223),j=i.n(N),U=i(7113);class K{resize(){this.width=window.innerWidth,this.height=window.innerHeight,console.log("resize"),this.app&&this.app.resizeCanvas(this.width,this.height,!0)}initCanvas(){this.app=new(j())(this.sketch,this.el),requestAnimationFrame(this.render)}mousedown(t){this.mouseupTO&&clearTimeout(this.mouseupTO);let e=[];this.trails.push(e),this.activeTrail=e}mousemove(t){this.mouse.x.t=t.clientX,this.mouse.y.t=t.clientY}mouseup(){this.mouseupTO&&clearTimeout(this.mouseupTO),this.mouseupTO=setTimeout(()=>{this.activeTrail=null},300)}render(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.t=.001*t,this.mouse.x.c+=(this.mouse.x.t-this.mouse.x.c)*.08,this.mouse.y.c+=(this.mouse.y.t-this.mouse.y.c)*.08,this.mouse.delta.t=Math.sqrt(Math.pow(this.mouse.x.t-this.mouse.x.c,2)+Math.pow(this.mouse.y.t-this.mouse.y.c,2)),this.mouse.delta.c+=(this.mouse.delta.t-this.mouse.delta.c)*.08,this.activeTrail&&(this.activeTrail.push({x:this.mouse.x.c,y:this.mouse.y.c}),this.activeTrail.length>this.maxTrailLength&&this.activeTrail.shift()),this.trails.forEach(t=>{this.activeTrail!==t&&t.shift()}),this.trails=this.trails.filter(t=>t&&t.length>0),requestAnimationFrame(this.render)}initBrush(t){l=!0,c=t,s=t,k(t),t.setup=()=>{t.createCanvas(this.width,this.height,t.WEBGL),t.angleMode(t.DEGREES),d(),C.isActive=!1,b(window.innerWidth<=1024?2.25:.9)}}changeColor(t){"dark"===t?this.currentColor="#1C1C22":this.currentColor="#EBEBEB"}sketch(t){this.initBrush(t),t.draw=()=>{t.frameRate(30),t.translate(-this.width/2,-this.height/2),t.background("#ffffff00"),P(this.currentColor),A.w=1,G(),B("HB",this.currentColor,1),E(15,45),A.w=1.005,this.trails.forEach(t=>{t.length>0&&function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=new F(0===e?"segments":"curve");if(t&&t.length>0){let o,n,h,r=0;for(let a=0;a<t.length-1;a++)if(e>0&&a<t.length-2){let l=t[a],c=t[a+1],d=t[a+2],m=u.dist(l[0],l[1],c[0],c[1]),g=u.dist(c[0],c[1],d[0],d[1]),x=p(l[0],l[1],c[0],c[1]),f=p(c[0],c[1],d[0],d[1]),y=e*Math.min(Math.min(m,g),.5*Math.min(m,g)),w=Math.max(m,g),k=m-y,z=g-y;if(Math.floor(x)===Math.floor(f)){let e=i&&0===a?0:m-r,d=i?0===a?0:g-h:g;s.addSegment(x,e,l[2],!0),a===t.length-3&&s.addSegment(f,d,c[2],!0),r=0,0===a&&(o=m,h=y,n=t[1],r=0)}else{let e={x:c[0]-y*u.cos(-x),y:c[1]-y*u.sin(-x)},d={x:e.x+w*u.cos(-x+90),y:e.y+w*u.sin(-x+90)},m={x:c[0]+y*u.cos(-f),y:c[1]+y*u.sin(-f)},p={x:m.x+w*u.cos(-f+90),y:m.y+w*u.sin(-f+90)},g=v(e,d,m,p,!0),C=u.dist(e.x,e.y,g.x,g.y),_=2*Math.asin(u.dist(e.x,e.y,m.x,m.y)/2/C)*(180/Math.PI),b=2*Math.PI*C*_/360,M=i&&0===a?0:k-r,A=a===t.length-3?i?o-y:z:0;s.addSegment(x,M,l[2],!0),s.addSegment(x,isNaN(b)?0:b,l[2],!0),s.addSegment(f,A,c[2],!0),r=y,0===a&&(o=k,h=y,n=[e.x,e.y])}a==t.length-3&&s.endPlot(f,c[2],!0)}else if(0===e){0===a&&i&&t.pop();let e=t[a],o=t[a+1],n=u.dist(e[0],e[1],o[0],o[1]),h=p(e[0],e[1],o[0],o[1]);s.addSegment(h,n,1,!0),a==t.length-2&&s.endPlot(h,1,!0)}s.origin=i&&0!==e?n:t[0]}return s})(t,e).draw()}(t.map(t=>[t.x,t.y]),1)}),G(),P(this.currentColor),B("HB",this.currentColor,1),E(5,30,{rand:.1,continuous:!0,gradient:.3});let e=5+.25*this.mouse.delta.c;!function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];d();let o=new F("curve"),n=Math.PI*i/2,h=u.random(0,360),r=()=>s?u.random(-1,1):0;o.addSegment(0+h+r(),n+r(),1,!0),o.addSegment(-90+h+r(),n+r(),1,!0),o.addSegment(-180+h+r(),n+r(),1,!0),o.addSegment(-270+h+r(),n+r(),1,!0);let a=s?u.randInt(-5,5):0;s&&o.addSegment(0+h,Math.PI/180*a*i,!0),o.endPlot(a+h,1,!0);let l=[t-i*u.sin(h),e-i*u.cos(-h)];o.show(l[0],l[1],1)}(this.mouse.x.c,this.mouse.y.c,e)}}destroy(){this.app&&(this.app.remove(),this.app=void 0),window.removeEventListener("resize",this.resize),document.removeEventListener("mousedown",this.mousedown),document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)}constructor(t){this.t=0,this.trails=[],this.activeTrail=null,this.currentColor="#EBEBEB",this.width=window.innerWidth,this.height=window.innerHeight,this.trails=[],this.activeTrail=null,this.mouse={x:{c:-100,t:-100},y:{c:-100,t:-100},delta:{c:0,t:0}},this.maxTrailLength=500,this.el=document.getElementById(t)||void 0,this.render=this.render.bind(this),this.sketch=this.sketch.bind(this),this.initBrush=this.initBrush.bind(this),this.resize=this.resize.bind(this),this.mousemove=this.mousemove.bind(this),this.mousedown=this.mousedown.bind(this),this.mouseup=this.mouseup.bind(this),window.addEventListener("resize",this.resize),document.addEventListener("mousedown",this.mousedown),document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup),this.resize(),this.initCanvas()}}function J(){let{theme:t,systemTheme:e}=(0,U.D)(),i=(0,n.useId)();return(0,n.useEffect)(()=>{let s="system"===t?e:t,o=new K(i);return o.changeColor(s||"light"),()=>{o.destroy()}},[t]),(0,o.jsx)("div",{id:i,className:"fixed top-0 h-dvh w-full overflow-hidden"})}}}]);